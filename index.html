<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Gravy Game</title>
</head>
<body style="margin: 0; overflow-y: hidden; overflow-x: hidden;">
<canvas id="my-canvas" style="width: 100vw; height: 100vw"></canvas>
<script>
    let canvas = document.getElementById("my-canvas");
    // gets WebGl API
    let gl = canvas.getContext("webgl");

    // loads our WebAssembly file and then calls our WebAssembly's main function
    let imports = {
        env: {
            js_clear_screen_to_color: function (red, green, blue, alpha) {
                gl.clearColor(red, green, blue, alpha);
                gl.clear(gl.COLOR_BUFFER_BIT);
            }
        }
    };
    WebAssembly.instantiateStreaming(fetch('target/wasm32-unknown-unknown/debug/examples/game.wasm'), imports).then(function (result) {
        result.instance.exports.main();

        document.onkeydown = function (event) {
            let code = 0;
            switch (event.code) {
                case "ArrowLeft":
                    code = 1;
                    break;
                case "ArrowRight":
                    code = 2;
                    break;
                case "ArrowUp":
                    code = 3;
                    break;
                case "ArrowDown":
                    code = 4;
                    break;
                case "Space":
                    code = 5;
                    break;
            }
            result.instance.exports.key_pressed(code);
        }
    })
</script>
</body>
</html>